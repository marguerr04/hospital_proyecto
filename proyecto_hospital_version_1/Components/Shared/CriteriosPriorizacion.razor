@using Microsoft.AspNetCore.Components
@using Microsoft.AspNetCore.Components
@namespace proyecto_hospital_version_1.Shared

<div class="criterios-priorizacion">
    <div class="row">
        <!-- Grupo 1 -->
        <div class="col-md-6 mb-4">
            <div class="criterion-group">
                <div class="criterion-header" @onclick="() => ToggleGroup(1)">
                    <h6 class="mb-0 d-flex justify-content-between align-items-center">
                        <span>Prioridad Legal/Social</span>
                        <i class="bi @(expandedGroups.Contains(1) ? "bi-chevron-up" : "bi-chevron-down")"></i>
                    </h6>
                </div>
                @if (expandedGroups.Contains(1))
                {
                    <div class="criterion-content mt-2">
                        <div class="form-check mb-2">
                            <input class="form-check-input" type="radio" name="criterio" value="sename"
                                   @onchange="@((e) => OnCriterioSeleccionado(e.Value?.ToString()))"
                                   checked="@(CriterioSeleccionado == "sename")">
                            <label class="form-check-label">
                                <strong>SENAME</strong><br>
                                <small class="text-muted">Relacionado con el criterio de protección social</small>
                            </label>
                        </div>
                        <div class="form-check mb-2">
                            <input class="form-check-input" type="radio" name="criterio" value="prais"
                                   @onchange="@((e) => OnCriterioSeleccionado(e.Value?.ToString()))"
                                   checked="@(CriterioSeleccionado == "prais")">
                            <label class="form-check-label">
                                <strong>PRAIS</strong><br>
                                <small class="text-muted">Programa de Reparación y Atención Integral de Salud</small>
                            </label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="criterio" value="comges"
                                   @onchange="@((e) => OnCriterioSeleccionado(e.Value?.ToString()))"
                                   checked="@(CriterioSeleccionado == "comges")">
                            <label class="form-check-label">
                                <strong>Paciente COMGES</strong><br>
                                <small class="text-muted">Comisión de Medicina General</small>
                            </label>
                        </div>
                    </div>
                }
            </div>
        </div>

        <!-- Grupo 2 -->
        <div class="col-md-6 mb-4">
            <div class="criterion-group">
                <div class="criterion-header" @onclick="() => ToggleGroup(2)">
                    <h6 class="mb-0 d-flex justify-content-between align-items-center">
                        <span>Prioridad Médica</span>
                        <i class="bi @(expandedGroups.Contains(2) ? "bi-chevron-up" : "bi-chevron-down")"></i>
                    </h6>
                </div>
                @if (expandedGroups.Contains(2))
                {
                    <div class="criterion-content mt-2">
                        <div class="form-check mb-2">
                            <input class="form-check-input" type="radio" name="criterio" value="sanitaria"
                                   @onchange="@((e) => OnCriterioSeleccionado(e.Value?.ToString()))"
                                   checked="@(CriterioSeleccionado == "sanitaria")">
                            <label class="form-check-label">
                                <strong>Prioridad Sanitaria</strong><br>
                                <small class="text-muted">Ej. paciente oncológico</small>
                            </label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="criterio" value="ges"
                                   @onchange="@((e) => OnCriterioSeleccionado(e.Value?.ToString()))"
                                   checked="@(CriterioSeleccionado == "ges")">
                            <label class="form-check-label">
                                <strong>Paciente con patología GES</strong><br>
                                <small class="text-muted">Garantías Explícitas de Salud</small>
                            </label>
                        </div>
                    </div>
                }
            </div>
        </div>

        <!-- Grupo 3 -->
        <div class="col-md-6 mb-4">
            <div class="criterion-group">
                <div class="criterion-header" @onclick="() => ToggleGroup(3)">
                    <h6 class="mb-0 d-flex justify-content-between align-items-center">
                        <span>Prioridad Temporal</span>
                        <i class="bi @(expandedGroups.Contains(3) ? "bi-chevron-up" : "bi-chevron-down")"></i>
                    </h6>
                </div>
                @if (expandedGroups.Contains(3))
                {
                    <div class="criterion-content mt-2">
                        <div class="form-check mb-2">
                            <input class="form-check-input" type="radio" name="criterio" value="percentil50"
                                   @onchange="@((e) => OnCriterioSeleccionado(e.Value?.ToString()))"
                                   checked="@(CriterioSeleccionado == "percentil50")">
                            <label class="form-check-label">
                                <strong>Paciente del percentil 50 más antiguo</strong><br>
                                <small class="text-muted">De la lista de espera por subespecialidad o patología</small>
                            </label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="criterio" value="licencia"
                                   @onchange="@((e) => OnCriterioSeleccionado(e.Value?.ToString()))"
                                   checked="@(CriterioSeleccionado == "licencia")">
                            <label class="form-check-label">
                                <strong>Licencia médica prolongada</strong><br>
                                <small class="text-muted">Mayor a 60 días asociada a la patología</small>
                            </label>
                        </div>
                    </div>
                }
            </div>
        </div>

        <!-- Grupo 4 -->
        <div class="col-md-6 mb-4">
            <div class="criterion-group">
                <div class="criterion-header" @onclick="() => ToggleGroup(4)">
                    <h6 class="mb-0 d-flex justify-content-between align-items-center">
                        <span>Prioridad Logística</span>
                        <i class="bi @(expandedGroups.Contains(4) ? "bi-chevron-up" : "bi-chevron-down")"></i>
                    </h6>
                </div>
                @if (expandedGroups.Contains(4))
                {
                    <div class="criterion-content mt-2">
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="criterio" value="logistica"
                                   @onchange="@((e) => OnCriterioSeleccionado(e.Value?.ToString()))"
                                   checked="@(CriterioSeleccionado == "logistica")">
                            <label class="form-check-label">
                                <strong>Oportunidad Logística Clínica</strong><br>
                                <small class="text-muted">Optimización de recursos y timing quirúrgico</small>
                            </label>
                        </div>
                    </div>
                }
            </div>
        </div>
    </div>
</div>

<style>
    .criterion-group {
        border: 1px solid #dee2e6;
        border-radius: 0.5rem;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
        transition: transform 0.2s ease, box-shadow 0.2s ease;
        background-color: #fff;
    }

        .criterion-group:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.08);
        }

    .criterion-header {
        background-color: #f8f9fa;
        padding: 1rem;
        cursor: pointer;
    }

    .criterion-content {
        padding: 1rem;
    }
</style>