@using Microsoft.AspNetCore.Components
@using Microsoft.AspNetCore.Components
@namespace proyecto_hospital_version_1.Shared

<div class="criterios-priorizacion">
    <!-- Grupo 1: Prioridad Legal/Social -->
    <div class="criterion-group mb-4">
        <div class="criterion-header" @onclick="() => ToggleGroup(1)">
            <h6 class="mb-0 d-flex justify-content-between align-items-center">
                <span><i class="bi bi-shield-check me-2 text-primary"></i>Prioridad Legal/Social</span>
                <i class="bi @(expandedGroups.Contains(1) ? "bi-chevron-up" : "bi-chevron-down")"></i>
            </h6>
        </div>
        @if (expandedGroups.Contains(1))
        {
            <div class="criterion-content mt-3">
                <div class="form-check mb-2">
                    <input class="form-check-input" type="radio" name="criterio" value="sename"
                           @onchange="@((e) => OnCriterioSeleccionado(e.Value?.ToString()))"
                           checked="@(CriterioSeleccionado == "sename")">
                    <label class="form-check-label">
                        <strong>SENAME</strong><br>
                        <small class="text-muted">Relacionado con el criterio de protección social</small>
                    </label>
                </div>
                <div class="form-check mb-2">
                    <input class="form-check-input" type="radio" name="criterio" value="prais"
                           @onchange="@((e) => OnCriterioSeleccionado(e.Value?.ToString()))"
                           checked="@(CriterioSeleccionado == "prais")">
                    <label class="form-check-label">
                        <strong>PRAIS</strong><br>
                        <small class="text-muted">Programa de Reparación y Atención Integral de Salud</small>
                    </label>
                </div>
                <div class="form-check mb-2">
                    <input class="form-check-input" type="radio" name="criterio" value="comges"
                           @onchange="@((e) => OnCriterioSeleccionado(e.Value?.ToString()))"
                           checked="@(CriterioSeleccionado == "comges")">
                    <label class="form-check-label">
                        <strong>Paciente COMGES</strong><br>
                        <small class="text-muted">Comisión de Medicina General</small>
                    </label>
                </div>
            </div>
        }
    </div>

    <!-- Grupo 2: Prioridad Médica -->
    <div class="criterion-group mb-4">
        <div class="criterion-header" @onclick="() => ToggleGroup(2)">
            <h6 class="mb-0 d-flex justify-content-between align-items-center">
                <span><i class="bi bi-heart-pulse me-2 text-danger"></i>Prioridad Médica</span>
                <i class="bi @(expandedGroups.Contains(2) ? "bi-chevron-up" : "bi-chevron-down")"></i>
            </h6>
        </div>
        @if (expandedGroups.Contains(2))
        {
            <div class="criterion-content mt-3">
                <div class="form-check mb-2">
                    <input class="form-check-input" type="radio" name="criterio" value="sanitaria"
                           @onchange="@((e) => OnCriterioSeleccionado(e.Value?.ToString()))"
                           checked="@(CriterioSeleccionado == "sanitaria")">
                    <label class="form-check-label">
                        <strong>Prioridad Sanitaria</strong><br>
                        <small class="text-muted">Ej. paciente oncológico</small>
                    </label>
                </div>
                <div class="form-check mb-2">
                    <input class="form-check-input" type="radio" name="criterio" value="ges"
                           @onchange="@((e) => OnCriterioSeleccionado(e.Value?.ToString()))"
                           checked="@(CriterioSeleccionado == "ges")">
                    <label class="form-check-label">
                        <strong>Paciente con patología GES</strong><br>
                        <small class="text-muted">Garantías Explícitas de Salud</small>
                    </label>
                </div>
            </div>
        }
    </div>

    <!-- Grupo 3: Prioridad Temporal -->
    <div class="criterion-group mb-4">
        <div class="criterion-header" @onclick="() => ToggleGroup(3)">
            <h6 class="mb-0 d-flex justify-content-between align-items-center">
                <span><i class="bi bi-clock me-2 text-warning"></i>Prioridad Temporal</span>
                <i class="bi @(expandedGroups.Contains(3) ? "bi-chevron-up" : "bi-chevron-down")"></i>
            </h6>
        </div>
        @if (expandedGroups.Contains(3))
        {
            <div class="criterion-content mt-3">
                <div class="form-check mb-2">
                    <input class="form-check-input" type="radio" name="criterio" value="percentil50"
                           @onchange="@((e) => OnCriterioSeleccionado(e.Value?.ToString()))"
                           checked="@(CriterioSeleccionado == "percentil50")">
                    <label class="form-check-label">
                        <strong>Paciente del percentil 50 más antiguo</strong><br>
                        <small class="text-muted">De la lista de espera por subespecialidad o patología</small>
                    </label>
                </div>
                <div class="form-check mb-2">
                    <input class="form-check-input" type="radio" name="criterio" value="licencia"
                           @onchange="@((e) => OnCriterioSeleccionado(e.Value?.ToString()))"
                           checked="@(CriterioSeleccionado == "licencia")">
                    <label class="form-check-label">
                        <strong>Licencia médica prolongada</strong><br>
                        <small class="text-muted">Mayor a 60 días asociada a la patología</small>
                    </label>
                </div>
            </div>
        }
    </div>

    <!-- Grupo 4: Prioridad Logística -->
    <div class="criterion-group mb-4">
        <div class="criterion-header" @onclick="() => ToggleGroup(4)">
            <h6 class="mb-0 d-flex justify-content-between align-items-center">
                <span><i class="bi bi-gear me-2 text-success"></i>Prioridad Logística</span>
                <i class="bi @(expandedGroups.Contains(4) ? "bi-chevron-up" : "bi-chevron-down")"></i>
            </h6>
        </div>
        @if (expandedGroups.Contains(4))
        {
            <div class="criterion-content mt-3">
                <div class="form-check mb-2">
                    <input class="form-check-input" type="radio" name="criterio" value="logistica"
                           @onchange="@((e) => OnCriterioSeleccionado(e.Value?.ToString()))"
                           checked="@(CriterioSeleccionado == "logistica")">
                    <label class="form-check-label">
                        <strong>Oportunidad Logística Clínica</strong><br>
                        <small class="text-muted">Optimización de recursos y timing quirúrgico</small>
                    </label>
                </div>
            </div>
        }
    </div>
</div>

