@page "/hospital-probe"
@using proyecto_hospital_version_1.Models // Para PacienteHospital
@using proyecto_hospital_version_1.Components.Shared // Para BuscadorPaciente, InfoPacienteCard, AlertasClinicasCard

<PageTitle>Prueba de Componentes Hospitalarios</PageTitle>

<div class="container mt-4">
    <h1 class="mb-4">Prueba de Buscador de Pacientes y Cards</h1>

    <h3>1. Buscador de Pacientes</h3>
    <p>Utiliza el componente <code>BuscadorPaciente</code> para encontrar un paciente por RUT.</p>
    <div class="mb-4">
        {{-- ¡CORRECCIÓN AQUÍ! Cambiar a OnPacienteEncontrado --}}
        <BuscadorPaciente OnPacienteEncontrado="HandlePacienteSeleccionado" />
    </div>

    @if (_pacienteSeleccionado != null)
    {
        <h3>2. Información del Paciente Seleccionado</h3>
        <div class="mb-4">
            <InfoPacienteCard Paciente="_pacienteSeleccionado" />
        </div>

        
    }
    else
    {
        <div class="alert alert-info mt-4">
            No se ha seleccionado ningún paciente. Use el buscador para iniciar la prueba.
        </div>
    }
</div>

@code {
    private PacienteHospital? _pacienteSeleccionado;

    // Este método se ejecutará cuando el componente BuscadorPaciente emita su evento OnPacienteEncontrado
    private void HandlePacienteSeleccionado(PacienteHospital? paciente)
    {
        _pacienteSeleccionado = paciente;
    }
}