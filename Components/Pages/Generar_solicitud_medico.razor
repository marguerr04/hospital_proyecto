@page "/generar_solicitud_medico"
@layout Components.Layout.MainLayoutMedico


<PageTitle>Nueva Solicitud Quirúrgica</PageTitle>

<div class="solicitud-container">
    <div class="row">
        <div class="col-lg-8">
            <h1 class="h3 mb-4">Nueva Solicitud Quirúrgica</h1>

            <nav class="nav nav-pills nav-fill mb-4">
                <a class="nav-link active" href="#">1) Contexto y Consentimiento</a>
            </nav>






            <div class="mb-4">
                <label for="numeroBusqueda" class="form-label">Número de Solicitud</label>
                <InputNumber @bind-Value="NumeroBusqueda" id="numeroBusqueda" class="form-control" placeholder="Ej: 12345" />
            </div>

            <div class="mb-4">
                <label for="textoBusqueda" class="form-label">Texto de Búsqueda</label>
                <InputText @bind-Value="TextoBusqueda" id="textoBusqueda" class="form-control" placeholder="Ej: Nombre, código, etc." />
            </div>

            <button class="btn btn-primary" @onclick="Buscar">Buscar</button>







            <div class="card shadow-sm">
                <div class="card-body p-4">
                    <div class="info-paciente mb-4">
                        <strong>Paciente:</strong> Gabriel Picand - <strong>RUT:</strong> 9.487.570-6
                    </div>

                    <h5 class="mb-3 border-bottom pb-2">1. Procedencia y Diagnóstico</h5>

                    <div class="btn-group w-100 mb-3" role="group">
                        <input type="radio" class="btn-check" name="procedencia" id="btn-ambulatorio" autocomplete="off" checked>
                        <label class="btn btn-outline-primary" for="btn-ambulatorio">Ambulatorio/CRS</label>

                        <input type="radio" class="btn-check" name="procedencia" id="btn-hospitalizado" autocomplete="off">
                        <label class="btn btn-outline-primary" for="btn-hospitalizado">Hospitalizado</label>

                        <input type="radio" class="btn-check" name="procedencia" id="btn-urgencia" autocomplete="off">
                        <label class="btn btn-outline-primary" for="btn-urgencia">Urgencia</label>
                    </div>

                    <div class="mb-4">
                        <label for="diagnostico" class="form-label">Diagnóstico Principal (CIE-10)</label>
                        <input type="text" class="form-control" id="diagnostico" placeholder="Ej: Colelitiasis">
                    </div>

                    <h5 class="mb-3 border-bottom pb-2">2. Consentimiento Informado</h5>
                    <div class="d-flex justify-content-between align-items-center">
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" value="" id="consentimientoCheck" checked>
                            <label class="form-check-label" for="consentimientoCheck">
                                Se confirma que el consentimiento informado fue discutido y aceptado por el paciente.
                            </label>
                        </div>
                        <button class="btn btn-success">
                            <i class="bi bi-file-earmark-pdf-fill me-2"></i> Generar PDF
                        </button>
                    </div>
                </div>
            </div>

            <div class="d-flex justify-content-end mt-4">
                <button class="btn btn-secondary me-2" disabled>← Anterior</button>
                <button class="btn btn-primary">Siguiente →</button>
            </div>
        </div>

        <div class="col-lg-4">
            <div class="card alert-widget-sticky">
                <div class="card-body">
                    <h5 class="card-title mb-3"><i class="bi bi-exclamation-triangle-fill me-2"></i> Alertas Clínicas Clave</h5>
                    <p class="alert-item ges">⚠️ Paciente GES</p>
                    <p class="alert-item alergia">❗ Alergia a Penicilina</p>
                </div>
            </div>
        </div>
    </div>
</div>

@code {

    @code {
        private int? NumeroBusqueda { get; set; }
        private string TextoBusqueda { get; set; } = string.Empty;

        private void Buscar()
        {
            // Aquí decides qué hacer con los valores ingresados
            Console.WriteLine($"Número ingresado: {NumeroBusqueda}");
            Console.WriteLine($"Texto ingresado: {TextoBusqueda}");

            // 👇 Ejemplo: Llamar a tu base de datos, API o filtrar lista en memoria
            // var resultados = _context.Solicitudes
            //     .Where(s => s.Numero == NumeroBusqueda || s.Nombre.Contains(TextoBusqueda))
            //     .ToList();
        }
    }

}